# Client MVC #
A lightweight client MVC framework for building small Single Page Applications in Javascript with it's roots in Backbone.

### Introduction ###
A Lightweight MVC framework for Javascript with it's roots in Backbone. 

The opposite of my similar backbone-ribs project, the intention is to create a framework without the strict REST model dependencies of Backbone that is focussed on view management, leaving data access up to the framework user to do as they see fit. Models in Client MVC are regarded as simple dumb objects for the most part and can be basic JSON responses, the implementation of which is in your hands (hence why there are no base Model or Collection objects). Instead, Client MVC makes heavy use of controller classes which are expected to call data access methods to obtain data which can then be returned in either a custom form or as raw JSON.

### Known Issues ###
* Currently routing is not supported - If you want a routed SPA I recommend checking out Backbone along with my Backbone Ribs project for a view state managed implementation of backbone.
* This is still a heavy beta project

### Core Client MVC Objects ###
Client MVC currently exposes the following primary objects for building simple Single Page Apps...

#### ClientMVC.Controller ####
A Controller is where your application's core logic, or the entry points to it, should be located. 
Any class extending ClientMVC.Controller should ensure to call the replaced methods as follows...
```
#!javascript
    ClientMVC.Controller.prototype.init(view, region);
```
In Client MVC a controller is reponsible for managing the content of a given region (or regions).
        
A sample controller could look like this...
```
#!javascript
    var coreController = MVC.Controller.extend({
    
        name : 'core controller',
    
        init : function() {
            ClientMVC.Controller.prototype.init(new CoreView(), new CoreRegion());
        }
        
        showAltView : function() {
            ClientMVC.Controller.prototype.showView(new AltCoreView());
        }
        
    });
```
All of the properties of the base controller defined here can be overridden as indicated in the sample region defined above. Each of these properties has a specific purpose...

* name : This is for debugging purposes only and indicates which view you are using - populating this will make identifying where errors occur far easier.
* region: The linked region object currently in use. THIS SHOULD NOT BE OVERRIDDEN (see init()).
* view: The linked view object currently in use. THIS SHOULD NOT BE OVERRIDDEN (see init()).

* init(): Initiates a controller - This sets the initial view and region and calls the 'showView()' method.
* showView(): Renders the specified view into the controller's region. If a view is not specified then the controller's initialView will be used.

#### ClientMVC.Region ####
Region implementations generally tend to be extremely lightweight, as the Client MVC code here does most of what is required.

Although the framework is lightweight and allows much variation; best practice when using Client MVC is to look at a 'View' as being responsible for itself in that it's a piece of contained markup that is NOT attached to anything on a page. In a Client MVC based App containers on a page are wrapped by Regions and the regions are responsible for then rendering a view into the container that they represent. SO the basic rule is...

* Is it new markup? = View
* Is the markup a container that's already present in a page or generated by another view? = Region

Any class extending ClientMVC.Region should ensure to call the replaced methods as follows...
```
#!javascript
    ClientMVC.Region.prototype.initialize.call(this, attributes, options);
```
A Region is responsible for the rendering of any views within itself and triggering the binding and unbinding of any events.
A sample region could look like this...
```
#!javascript
    var coreRegion = MVC.Region.extend({
    
        name : 'core region',
        container: '#app-wrapper',
        
    });
```     
All of the properties of the base region defined here can be overridden as indicated in the sample region defined above. Each of these properties has a specific purpose...

* name : This is for debugging purposes only and indicates which view you are using - populating this will make identifying where errors occur far easier.
* container: The jQuery selector representing the containing element that the region represents.
* parentRegion: The Region object representing the parent region. Null for the master region.
* parentView: The View object representing the parent view that the Region's selector is rendered in. Null for the master region.
* currentView: The View object currently rendered within the region.

* isAvailable(): Indicates if a region is available for rendering into.
* renderView(): Renders the specified view into the region. If the region container does not exist then this will trigger up the parent stack until an item is found and the items will render up to a point to allow the view to be rendered within this region. Once the view is rendered then the view's 'bindEvents()' method is triggered.
* disposeView(): Clears the current region and unbinds all events for the attached view. Disposal is important to avoid any memory leaks.
* extend(): This method is added to most of the key super classes in Client MVC and allows them to be extended and elements overridden and added to.
          
ClientMVC.DefaultRegion: The namespace exposes a DefaultRegion instance. This should represent the region at the uppermost level of your SPA. This is set to a standard region by default, so if you create a simple HTML page with a div on it with an ID of 'app' then that is where the base region for the app will be - you can customise and override this as you like in your app initialisation.
     
VIEW LIFECYCLE: Client MVC views maintain their bindings and have specific methods to dispose all of the events they use. A region will clear up any views it contains before allowing a new one to be attached, calling the 'clearEvents()' method on the view to clean up any used resources. It also has it's own 'disposeView()' method that will clear it's currentView.

## The Ministry of Technology Open Source Products ##
Welcome to The Ministry of Technology open source products. All open source Ministry of Technology products are distributed under the MIT License for maximum re-usability. Details on more of our products and services can be found on our website at http://www.ministryotech.co.uk

Our other open source repositories can be found here...

* [https://bitbucket.org/ministryotech](https://bitbucket.org/ministryotech)
* [https://github.com/ministryotech](https://github.com/ministryotech)
* [https://github.com/tiefling](https://github.com/tiefling)

Most of our content is stored on both Github and Bitbucket.

### Where can I get it? ###
You can download the javascript file (dev or minified version) from the downloads page here and add it to your website manually or you can use any of the following package managers...

- **NPM** - [https://www.npmjs.org/package/client-mvc](https://www.npmjs.org/package/client-mvc)
- **NUGET** - [https://www.nuget.org/packages/client-mvc](https://www.nuget.org/packages/client-mvc)

### Contribution guidelines ###
If you would like to contribute to the project, please contact me.

The source code can be used in a simple text editor or within Visual Studio using NodeJS Tools for Visual Studio. We recommend Visual Studio Code or Sublime Text!

### Who do I talk to? ###
* Keith Jackson - keith@ministryotech.co.uk